<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
  <dict>
    <key>name</key>
    <string>Lua</string>
    <key>scopeName</key>
    <string>source.lua</string>
    <key>patterns</key>
    <array>
      <dict>
        <key>begin</key>
        <string>\b(?:(local)\s+)?(function)\b(?![,:])</string>
        <key>beginCaptures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>keyword.local.lua</string>
          </dict>
          <key>2</key>
          <dict>
            <key>name</key>
            <string>keyword.control.lua</string>
          </dict>
        </dict>
        <key>end</key>
        <string>(?&lt;=[\)\-{}\[\]"'])</string>
        <key>name</key>
        <string>meta.function.lua</string>
        <key>patterns</key>
        <array>
          <dict>
            <key>include</key>
            <string>#comment</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(\()</string>
            <key>beginCaptures</key>
            <dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.parameters.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(\))|(?=[\-\.{}\[\]"'])</string>
            <key>endCaptures</key>
            <dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.parameters.finish.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>meta.parameter.lua</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#comment</string>
              </dict>
              <dict>
                <key>match</key>
                <string>[a-zA-Z_][a-zA-Z0-9_]*</string>
                <key>name</key>
                <string>variable.parameter.function.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>,</string>
                <key>name</key>
                <string>punctuation.separator.arguments.lua</string>
              </dict>
              <dict>
                <key>begin</key>
                <string>:</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.separator.arguments.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=[\),])</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>match</key>
            <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b\s*(?=:)</string>
            <key>name</key>
            <string>entity.name.class.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b</string>
            <key>name</key>
            <string>entity.name.function.lua</string>
          </dict>
        </array>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])0[xX][0-9A-Fa-f]+(\.[0-9A-Fa-f]*)?([eE]-?\d*)?([pP][-+]\d+)?</string>
        <key>name</key>
        <string>constant.numeric.float.hexadecimal.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])0[xX]\.[0-9A-Fa-f]+([eE]-?\d*)?([pP][-+]\d+)?</string>
        <key>name</key>
        <string>constant.numeric.float.hexadecimal.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])0[xX][0-9A-Fa-f]+(?![pPeE.0-9])</string>
        <key>name</key>
        <string>constant.numeric.integer.hexadecimal.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])\d+(\.\d*)?([eE]-?\d*)?</string>
        <key>name</key>
        <string>constant.numeric.float.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])\.\d+([eE]-?\d*)?</string>
        <key>name</key>
        <string>constant.numeric.float.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![\w\d.])\d+(?![pPeE.0-9])</string>
        <key>name</key>
        <string>constant.numeric.integer.lua</string>
      </dict>
      <dict>
        <key>include</key>
        <string>#string</string>
      </dict>
      <dict>
        <key>captures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>punctuation.definition.comment.lua</string>
          </dict>
        </dict>
        <key>match</key>
        <string>\A(#!).*$\n?</string>
        <key>name</key>
        <string>comment.line.shebang.lua</string>
      </dict>
      <dict>
        <key>include</key>
        <string>#comment</string>
      </dict>
      <dict>
        <key>captures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>keyword.control.goto.lua</string>
          </dict>
          <key>2</key>
          <dict>
            <key>name</key>
            <string>string.tag.lua</string>
          </dict>
        </dict>
        <key>match</key>
        <string>\b(goto)\s+([a-zA-Z_][a-zA-Z0-9_]*)</string>
      </dict>
      <dict>
        <key>captures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>punctuation.section.embedded.begin.lua</string>
          </dict>
          <key>2</key>
          <dict>
            <key>name</key>
            <string>punctuation.section.embedded.end.lua</string>
          </dict>
        </dict>
        <key>match</key>
        <string>(::)\s*[a-zA-Z_][a-zA-Z0-9_]*\s*(::)</string>
        <key>name</key>
        <string>string.tag.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>&lt;\s*(const|close)\s*&gt;</string>
        <key>captures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>string.tag.lua</string>
          </dict>
        </dict>
      </dict>
      <dict>
        <key>match</key>
        <string>\&lt;[a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*\&gt;</string>
        <key>name</key>
        <string>storage.type.generic.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b(break|do|else|for|if|elseif|goto|return|then|repeat|while|until|end|in)\b</string>
        <key>name</key>
        <string>keyword.control.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b(local|global)\b</string>
        <key>name</key>
        <string>keyword.local.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b(function)\b(?![,:])</string>
        <key>name</key>
        <string>keyword.control.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![^.]\.|:)\b(false|nil(?!:)|true|_ENV|_G|_VERSION|math\.(pi|huge|maxinteger|mininteger)|utf8\.charpattern|io\.(stdin|stdout|stderr)|package\.(config|cpath|loaded|loaders|path|preload|searchers))\b|(?&lt;![.])\.{3}(?!\.)</string>
        <key>name</key>
        <string>constant.language.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![^.]\.|:)\b(self)\b</string>
        <key>name</key>
        <string>variable.language.self.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![^.]\.|:)\b(assert|collectgarbage|dofile|error|getfenv|getmetatable|ipairs|load|loadfile|loadstring|module|next|pairs|pcall|print|rawequal|rawget|rawlen|rawset|require|select|setfenv|setmetatable|tonumber|tostring|type|unpack|xpcall)\b(?!\s*=(?!=))</string>
        <key>name</key>
        <string>support.function.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![^.]\.|:)\b(async)\b(?!\s*=(?!=))</string>
        <key>name</key>
        <string>entity.name.tag.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;![^.]\.|:)\b(coroutine\.(create|isyieldable|close|resume|running|status|wrap|yield)|string\.(byte|char|dump|find|format|gmatch|gsub|len|lower|match|pack|packsize|rep|reverse|sub|unpack|upper)|table\.(concat|insert|maxn|move|pack|remove|sort|unpack)|math\.(abs|acos|asin|atan2?|ceil|cosh?|deg|exp|floor|fmod|frexp|ldexp|log|log10|max|min|modf|pow|rad|random|randomseed|sinh?|sqrt|tanh?|tointeger|type)|io\.(close|flush|input|lines|open|output|popen|read|tmpfile|type|write)|os\.(clock|date|difftime|execute|exit|getenv|remove|rename|setlocale|time|tmpname)|package\.(loadlib|seeall|searchpath)|debug\.(debug|[gs]etfenv|[gs]ethook|getinfo|[gs]etlocal|[gs]etmetatable|getregistry|[gs]etupvalue|[gs]etuservalue|set[Cc]stacklimit|traceback|upvalueid|upvaluejoin)|bit32\.(arshift|band|bnot|bor|btest|bxor|extract|replace|lrotate|lshift|rrotate|rshift)|utf8\.(char|codes|codepoint|len|offset))\b(?!\s*=(?!=))</string>
        <key>name</key>
        <string>support.function.library.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b(and|or|not|\|\||\&amp;\&amp;|\!)\b</string>
        <key>name</key>
        <string>keyword.operator.logical.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b(?=\s*(?:[({"']|\[\[))</string>
        <key>name</key>
        <string>support.function.any-method.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b(?=\s*\??:)</string>
        <key>name</key>
        <string>entity.name.class.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>(?&lt;=[^.]\.|:)\b([a-zA-Z_][a-zA-Z0-9_]*)\b(?!\s*=\s*\b(function)\b)</string>
        <key>name</key>
        <string>entity.other.attribute.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b(?!\s*=\s*\b(function)\b)</string>
        <key>name</key>
        <string>variable.other.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b(?=\s*=\s*\b(function)\b)</string>
        <key>name</key>
        <string>entity.name.function.lua</string>
      </dict>
      <dict>
        <key>match</key>
        <string>\+|-|%|#|\*|\/|\^|==?|~=|!=|&lt;=?|&gt;=?|(?&lt;!\.)\.{2}(?!\.)</string>
        <key>name</key>
        <string>keyword.operator.lua</string>
      </dict>
    </array>
    <key>repository</key>
    <dict>
      <key>escaped_char</key>
      <dict>
        <key>patterns</key>
        <array>
          <dict>
            <key>match</key>
            <string>\\[abfnrtv\\"'\n]</string>
            <key>name</key>
            <string>constant.character.escape.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\\z[\n\t ]*</string>
            <key>name</key>
            <string>constant.character.escape.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\\\d{1,3}</string>
            <key>name</key>
            <string>constant.character.escape.byte.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\\x[0-9A-Fa-f][0-9A-Fa-f]</string>
            <key>name</key>
            <string>constant.character.escape.byte.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\\u\{[0-9A-Fa-f]+\}</string>
            <key>name</key>
            <string>constant.character.escape.unicode.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\\.</string>
            <key>name</key>
            <string>invalid.illegal.character.escape.lua</string>
          </dict>
        </array>
      </dict>
      <key>string</key>
      <dict>
        <key>patterns</key>
        <array>
          <dict>
            <key>begin</key>
            <string>'</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>'[ \t]*|(?=\n)</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.end.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>string.quoted.single.lua</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#escaped_char</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>"</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>"[ \t]*|(?=\n)</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.end.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>string.quoted.double.lua</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#escaped_char</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>`</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>`[ \t]*|(?=\n)</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.end.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>string.quoted.double.lua</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=\.cdef)\s*(\[(=*)\[)</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>string.quoted.other.multiline.lua</string>
              </dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.begin.lua</string>
              </dict>
            </dict>
            <key>contentName</key>
            <string>meta.embedded.lua</string>
            <key>end</key>
            <string>(\]\2\])[ \t]*</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>string.quoted.other.multiline.lua</string>
              </dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.end.lua</string>
              </dict>
            </dict>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>source.c</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;!--)\[(=*)\[</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>\]\1\][ \t]*</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.string.end.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>string.quoted.other.multiline.lua</string>
          </dict>
        </array>
      </dict>
      <key>comment</key>
      <dict>
        <key>patterns</key>
        <array>
          <dict>
            <key>begin</key>
            <string>(^[ \t]+)?(?=--)</string>
            <key>beginCaptures</key>
            <dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.whitespace.comment.leading.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?!\G)((?!^)[ \t]+\n)?</string>
            <key>endCaptures</key>
            <dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>punctuation.whitespace.comment.trailing.lua</string>
              </dict>
            </dict>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>--\[(=*)\[</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.definition.comment.begin.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>\]\1\]</string>
                <key>endCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.definition.comment.end.lua</string>
                  </dict>
                </dict>
                <key>name</key>
                <string>comment.block.lua</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#comment_documentation_bracket</string>
                  </dict>
                </array>
              </dict>
              <dict>
                <key>begin</key>
                <string>----</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.definition.comment.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>\n</string>
                <key>name</key>
                <string>comment.line.double-dash.lua</string>
              </dict>
              <dict>
                <key>begin</key>
                <string>---</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.definition.comment.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>\n</string>
                <key>name</key>
                <string>comment.line.double-dash.documentation.lua</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc</string>
                  </dict>
                  <dict>
                    <key>include</key>
                    <string>#ldoc_tag</string>
                  </dict>
                </array>
              </dict>
              <dict>
                <key>begin</key>
                <string>--</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>punctuation.definition.comment.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>\n</string>
                <key>name</key>
                <string>comment.line.double-dash.lua</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#ldoc_tag</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>\/\*</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.comment.begin.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>\*\/</string>
            <key>endCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>punctuation.definition.comment.end.lua</string>
              </dict>
            </dict>
            <key>name</key>
            <string>comment.block.lua</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#comment_documentation_asterisk</string>
              </dict>
            </array>
          </dict>
        </array>
      </dict>
      <key>comment_documentation_asterisk</key>
      <dict>
        <key>begin</key>
        <string>(?&lt;=/\*\*)([^*]|\*(?!/))*$</string>
        <key> </key>
        <string>^[ \t]*\*(?!/)(?=([^*]|[*](?!/))*$)</string>
        <key>patterns</key>
        <array>
          <dict>
            <key>include</key>
            <string>#emmydoc</string>
          </dict>
          <dict>
            <key>include</key>
            <string>#ldoc_tag</string>
          </dict>
        </array>
      </dict>
      <key>comment_documentation_bracket</key>
      <dict>
        <key>begin</key>
        <string>(?&lt;=--\[\[)([^-]|\-(?!\]\]))*$</string>
        <key>while</key>
        <string>(^|\G)[ \t]*-*(?![^\r\n]*\]\])</string>
        <key>patterns</key>
        <array>
          <dict>
            <key>include</key>
            <string>#emmydoc</string>
          </dict>
          <dict>
            <key>include</key>
            <string>#ldoc_tag</string>
          </dict>
        </array>
      </dict>
      <key>emmydoc</key>
      <dict>
        <key>patterns</key>
        <array>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@class</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>\b([a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*)</string>
                <key>name</key>
                <string>support.class.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>:|,</string>
                <key>name</key>
                <string>keyword.operator.lua</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@enum</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>\b([a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*)</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>variable.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=\n)</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@type</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@alias</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>\b([a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*)</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>variable.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=[\n#])</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)(@operator)\s*(\b[a-z]+)?</string>
            <key>beginCaptures</key>
            <dict>
              <key>1</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
              <key>2</key>
              <dict>
                <key>name</key>
                <string>support.function.library.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@cast</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>\b([a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*)</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>variable.other.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=\n)</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                  <dict>
                    <key>match</key>
                    <string>([+-|])</string>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@param</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b(\??)</string>
                <key>beginCaptures</key>
                <dict>
                  <key>1</key>
                  <dict>
                    <key>name</key>
                    <string>entity.name.variable.lua</string>
                  </dict>
                  <key>2</key>
                  <dict>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=[\n#])</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@return</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>\?</string>
                <key>name</key>
                <string>keyword.operator.lua</string>
              </dict>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@field</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>(\b([a-zA-Z_][a-zA-Z0-9_]*)\b|(\[))(\??)</string>
                <key>beginCaptures</key>
                <dict>
                  <key>2</key>
                  <dict>
                    <key>name</key>
                    <string>entity.name.variable.lua</string>
                  </dict>
                  <key>3</key>
                  <dict>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=[\n#])</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>include</key>
                    <string>#string</string>
                  </dict>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                  <dict>
                    <key>match</key>
                    <string>\]</string>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@generic</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>\b([a-zA-Z_][a-zA-Z0-9_]*)\b</string>
                <key>beginCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>storage.type.generic.lua</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=\n)|(,)</string>
                <key>endCaptures</key>
                <dict>
                  <key>0</key>
                  <dict>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </dict>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>match</key>
                    <string>:</string>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                  <dict>
                    <key>include</key>
                    <string>#emmydoc.type</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@vararg</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@overload</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@deprecated</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@meta</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@private</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@protected</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@package</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@version</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>\b(5\.1|5\.2|5\.3|5\.4|JIT)\b</string>
                <key>name</key>
                <string>support.class.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>,|\&gt;|\&lt;</string>
                <key>name</key>
                <string>keyword.operator.lua</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@see</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>\b([a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*)</string>
                <key>name</key>
                <string>support.class.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>#</string>
                <key>name</key>
                <string>keyword.operator.lua</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@diagnostic</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>begin</key>
                <string>([a-zA-Z_\-0-9]+)[ \t]*(:)?</string>
                <key>beginCaptures</key>
                <dict>
                  <key>1</key>
                  <dict>
                    <key>name</key>
                    <string>keyword.other.unit</string>
                  </dict>
                  <key>2</key>
                  <dict>
                    <key>name</key>
                    <string>keyword.operator.unit</string>
                  </dict>
                </dict>
                <key>end</key>
                <string>(?=\n)</string>
                <key>patterns</key>
                <array>
                  <dict>
                    <key>match</key>
                    <string>\b([a-zA-Z_\*][a-zA-Z0-9_\-]*)</string>
                    <key>name</key>
                    <string>support.class.lua</string>
                  </dict>
                  <dict>
                    <key>match</key>
                    <string>,</string>
                    <key>name</key>
                    <string>keyword.operator.lua</string>
                  </dict>
                </array>
              </dict>
            </array>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---[ \t]*)@module</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#string</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>match</key>
            <string>(?&lt;=---[ \t]*)@(async|nodiscard)</string>
            <key>name</key>
            <string>storage.type.annotation.lua</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?&lt;=---)\|\s*[\&gt;\+]?</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>storage.type.annotation.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\n@#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>include</key>
                <string>#string</string>
              </dict>
            </array>
          </dict>
        </array>
      </dict>
      <key>emmydoc.type</key>
      <dict>
        <key>patterns</key>
        <array>
          <dict>
            <key>begin</key>
            <string>\bfun\b</string>
            <key>beginCaptures</key>
            <dict>
              <key>0</key>
              <dict>
                <key>name</key>
                <string>keyword.control.lua</string>
              </dict>
            </dict>
            <key>end</key>
            <string>(?=[\s#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>[\(\),:\?][ \t]*</string>
                <key>name</key>
                <string>keyword.operator.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>([a-zA-Z_][a-zA-Z0-9_\.\*\[\]\&lt;\&gt;\,\-]*)(?&lt;!,)[ \t]*(?=\??:)</string>
                <key>name</key>
                <string>entity.name.variable.lua</string>
              </dict>
              <dict>
                <key>include</key>
                <string>#emmydoc.type</string>
              </dict>
              <dict>
                <key>include</key>
                <string>#string</string>
              </dict>
            </array>
          </dict>
          <dict>
            <key>match</key>
            <string>\&lt;[a-zA-Z_\*][a-zA-Z0-9_\.\*\-]*\&gt;</string>
            <key>name</key>
            <string>storage.type.generic.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>\basync\b</string>
            <key>name</key>
            <string>entity.name.tag.lua</string>
          </dict>
          <dict>
            <key>match</key>
            <string>[\{\}\:\,\?\|\`][ \t]*</string>
            <key>name</key>
            <string>keyword.operator.lua</string>
          </dict>
          <dict>
            <key>begin</key>
            <string>(?=[a-zA-Z_\.\*"'\[])</string>
            <key>end</key>
            <string>(?=[\s\)\,\?\:\}\|#])</string>
            <key>patterns</key>
            <array>
              <dict>
                <key>match</key>
                <string>([a-zA-Z0-9_\.\*\[\]\&lt;\&gt;\,\-]+)(?&lt;!,)[ \t]*</string>
                <key>name</key>
                <string>support.type.lua</string>
              </dict>
              <dict>
                <key>match</key>
                <string>(\.\.\.)[ \t]*</string>
                <key>name</key>
                <string>constant.language.lua</string>
              </dict>
              <dict>
                <key>include</key>
                <string>#string</string>
              </dict>
            </array>
          </dict>
        </array>
      </dict>
      <key>ldoc_tag</key>
      <dict>
        <key>match</key>
        <string>\G[ \t]*(@)(alias|annotation|author|charset|class|classmod|comment|constructor|copyright|description|example|export|factory|field|file|fixme|function|include|lfunction|license|local|module|name|param|pragma|private|raise|release|return|script|section|see|set|static|submodule|summary|tfield|thread|tparam|treturn|todo|topic|type|usage|warning|within)\b</string>
        <key>end</key>
        <string>(?!@)\b</string>
        <key>captures</key>
        <dict>
          <key>1</key>
          <dict>
            <key>name</key>
            <string>punctuation.definition.block.tag.ldoc</string>
          </dict>
          <key>2</key>
          <dict>
            <key>name</key>
            <string>storage.type.class.ldoc</string>
          </dict>
        </dict>
      </dict>
    </dict>
  </dict>
</plist>
